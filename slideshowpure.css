/*
 * Jellyfin-Media-Bar V4.0.0
 */

@import url(https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,400..700;1,400..700&display=swap);

/* Root Variables */
:root {
  --theme-background-color: #181818;
  --theme-text-color: #eee;
  --button-bg-subtle: rgba(255, 255, 255, 0.1);
  --button-bg-subtle-hover: rgba(255, 255, 255, 0.16);
  --button-bg-play: rgba(255, 255, 255, 0.3);
  --theme-roundness: 0.5rem;
  --font-weight-normal: 400;
  --button-icon-only-size: 3.125rem;
  --button-play-padding: 0.5rem 1rem;
  --mask-gradient: linear-gradient(to top, #fff0 2%, rgba(0, 0, 0, 0.5) 6%, #000 8%);
  --display-tomato-rating: none;
  --display-age-rating: none;
  --display-imdb-logo: none;
  --display-star-rating: none;
  --display-critic-rating: none;
}

/* Text Shadows */
.slide, .slide * {
  text-shadow: 0 0 3px rgba(0, 0, 0, 2);
}

.preload { background-color: var(--theme-background-color); }
.featured-content { display: none !important; }

/* Animations */
@keyframes scroll-vertical {
  0%, 10% { transform: translateY(0); }
  40%, 90% { transform: translateY(var(--scroll-amount)); }
  100% { transform: translateY(0); }
}
@keyframes frostedKenBurns {
  0% { filter: blur(8px); opacity: 0.7; transform: scale(1); }
  100% { filter: blur(0); opacity: 1; transform: scale(1.1); }
}

/* Marquee */
.marquee-vertical { position: relative; overflow: hidden; height: 100%; }
.marquee-inner { display: inline-block; white-space: normal; will-change: transform; }

/* Loading Screen */
.bar-loading {
  z-index: 99999999 !important;
  position: fixed; inset: 0;
  background: #000;
  display: flex; align-items: center; justify-content: center;
  opacity: 1; transition: opacity 0.3s ease-in-out;
}
.bar-loading.hide { opacity: 0; }
.loader-content { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 250px; }
.bar-loading h1 { width: 250px; height: 250px; display: flex; justify-content: center; align-items: center; margin: 0 auto; }
.bar-loading h1 img { width: 250px; max-height: 250px; object-fit: contain; opacity: 0; transition: opacity 0.5s ease-in-out; }
.progress-container { width: 200px; height: 6px; display: flex; align-items: center; }
.progress-bar { height: 5px; background: white; border-radius: 2px; transition: width 0.2s ease-in-out; }
.progress-gap { width: 6px; height: 5px; background: transparent; flex-shrink: 0; }
.unfilled-bar { height: 5px; background: #686868; border-radius: 2px; flex-grow: 1; transition: width 0.2s ease-in-out; }

/* Slides */
.slide {
  opacity: 0; position: absolute; inset: 0; transition: opacity 0.5s ease-in-out; z-index: 0;
}
.slide.active { opacity: 1; z-index: 1; }
.slide.active.slideshow-paused .backdrop.animate { animation-play-state: paused; }

/* Backdrops */
.backdrop-container,
.backdrop,
.backdrop-overlay,
.gradient-overlay {
  mask-image: var(--mask-gradient);
  -webkit-mask-image: var(--mask-gradient);
}
.backdrop-container {
  position: absolute; inset: 0; height: 91%;
}
.backdrop {
  width: 100%; height: 100%; object-fit: cover; object-position: center 20%; border-radius: 5px; z-index: 3;
}
.backdrop.low-quality { filter: blur(0.5px); transform: scale(1.01); transition: filter 0.3s, transform 0.3s; }
.backdrop.high-quality { filter: blur(0); transform: scale(1); transition: filter 0.3s, transform 0.3s; }
.backdrop.animate { animation: frostedKenBurns 10s ease-out forwards; }

.backdrop-overlay {
  background-color: rgba(0, 0, 0, 0.2); border-radius: 5px;
}
.gradient-overlay {
  background: linear-gradient(130deg, rgba(29,29,29,0.65) 10%, rgba(29,29,29,0.35) 30%, rgba(29,29,29,0) 100%);
}

/* Logo & Titles */
.logo-container {
  width: 40%; height: 35%; position: absolute; display: flex; align-items: center;
  z-index: 5; bottom: calc(50% + 1vh); left: 4vw;
}
.logo {
  max-height: 70%; max-width: 100%; position: absolute; bottom: 7vh; object-fit: contain;
  filter: brightness(1.5); transition: filter 0.3s;
}
.logo.low-quality { filter: brightness(1) blur(0.5px); }
.logo.high-quality { filter: brightness(1.1) blur(0); }
.logo.animate { animation: frostedKenBurns 1.2s cubic-bezier(0.4, 0, 0.2, 1); }

.slide-title {
  position: absolute; top: calc(50% - 5vh); left: 4vw;
  margin: 0; color: #fff; font-size: 2.5rem; font-weight: 700; z-index: 5;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%;
}

/* Plot & Genre */
.plot-container {
  position: absolute; top: calc(50% + 6vh); left: 4vw; width: 90%; height: 15%; color: #fff; z-index: 5;
  display: flex; align-items: flex-start; text-align: justify; box-sizing: border-box;
}
.plot {
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden; color: #fff;
}
.plot a { color: pink; }
.plot a:hover { opacity: 0.8; color: #fff; }
.genre {
  position: absolute; top: calc(50% + 4vh); left: 4vw; color: #fff;
  font-family: "Rubik", sans-serif; z-index: 5; font-weight: 500;
}

/* Navigation Dots & Arrows */
.arrow {
  position: absolute; top: 50%; transform: translateY(-50%);
  font-size: 12px; cursor: pointer; color: #fff; z-index: 5; display: flex; justify-content: center; align-items: center;
}
.left-arrow { left: 20px; }
.right-arrow { right: 20px; }
.dots-container {
  position: absolute; top: calc(50% + 18vh); right: 3%; z-index: 5; display: flex; gap: 5px; transition: opacity 0.3s;
}
.dot {
  width: 8px; height: 8px; background-color: #ccc; border-radius: 50%; cursor: pointer;
  transition: transform 0.03s, background-color 0.03s;
}
.dot:hover { transform: scale(1.3); background-color: #e0e0e0; }
.dot.active { background-color: #f0f0f0; transform: scale(1.7); }

/* Buttons */
.button-container {
  position: absolute; top: calc(50% + 17vh); left: 4vw; display: inline-flex; align-items: center; gap: 0.5rem; z-index: 5;
}
.button-container button,
.play-button,
.detail-button,
.favorite-button {
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: var(--theme-roundness); background-color: var(--button-bg-subtle);
  color: var(--theme-text-color); border: none; transition: background-color 0.2s ease-out, opacity 0.3s ease;
  cursor: pointer; -webkit-tap-highlight-color: transparent;
}
.button-container button:hover { background-color: var(--button-bg-subtle-hover) !important; opacity: 0.8; }
.button-container .favorite-button,
.button-container .detail-button {
  width: var(--button-icon-only-size); height: var(--button-icon-only-size); padding: 0;
}
.button-container .play-button {
  padding: var(--button-play-padding); background-color: var(--button-bg-play) !important;
}

/* Button Icons */
.button-container button::before {
  font-family: "Material Icons"; font-size: 1.6em; line-height: 1; font-weight: var(--font-weight-normal);
}
.play-button::before { content: "play_arrow"; margin-right: 0.5rem; }
.detail-button::before { content: "info"; }
.favorite-button::before { content: "favorite_outline"; }
.favorite-button.favorited::before { content: "favorite"; }

/* Slideshow Pause */
#slideshow-pause-button {
  position: absolute; top: calc(50% + 18vh); right: calc(2.5% + 65px);
  background-color: rgba(255,255,255,0.1); color: white;
  border: none; border-radius: var(--theme-roundness);
  width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: background-color 0.2s;
}
#slideshow-pause-button:hover { background-color: rgba(0, 0, 0, 0.8); }
#slideshow-pause-button .material-icons { font-size: 28px; }

/* Info Section */
.info-container {
  position: absolute; top: calc(50% + 0vh); left: 4vw;
  display: flex; align-items: center; color: #fff; z-index: 5; flex-wrap: wrap; font-weight: 500;
}
.rating-value, .runTime, .date { font-family: "Rubik", sans-serif; display: flex; align-items: center; font-weight: 500; }
.tomato-rating { display: var(--display-tomato-rating) !important; }
.imdb-logo { display: var(--display-imdb-logo) !important; }
.starRatingContainer.mediaInfoItem { display: var(--display-star-rating) !important; }
.mediaInfoCriticRating { display: var(--display-critic-rating) !important; }
.age-rating {
  display: var(--display-age-rating) !important; background: rgba(255,255,255,0.8);
  color: #000; border-radius: 5px; font-weight: 600; padding: 0 0.5em;
}
.separator-icon { font-size: 10px; color: aquamarine; }

/* Responsive Adjustments (Landscape Phones) */
@media only screen and (max-height: 767px) and (orientation: landscape) {
  .homeSectionsContainer { top: 57vh; }
  .button-container { left: 3vw; top: 30vw; transform: scale(0.85); }
  .dots-container { scale: 0.6; top: calc(50% + 20vh); }
  #slideshow-pause-button { right: calc(3% + 70px); top: calc(50% + 20vh); transform: scale(0.85); }
  .info-container { top: calc(50% + 5vh); left: 5vw; }
  .plot-container { top: calc(50% + 6vh); left: 5vw; }
  .genre { top: calc(50% - 10vh); left: 5vw; }
  .logo-container { height: 30%; top: 10%; left: 5vw; }
}

/* Portrait Phones/Tablets */
@media only screen and (max-width: 767px) and (orientation: portrait) {
  .plot-container { left: 50%; bottom: 40%; width: 90vw; transform: translate(-50%, -40px); }
  .plot { min-width: 80vw; max-width: 100vw; text-align: center; height: 8em; }
  .gradient-overlay { background: rgba(0, 0, 0, 0.25); }
  .dots-container { left: 50%; transform: translateX(-50%) scale(0.8); top: calc(50% + 20vh + 2em); }
  .genre { top: calc(50% + 4vh); left: 50%; width: 100%; text-align: center; transform: translateX(-50%); }
  .info-container { top: calc(32% + 10vh); left: 50%; transform: translateX(-50%); width: 95%; justify-content: center; }
  .button-container { top: calc(50% - 2.6vh); left: 50%; transform: translateX(-50%) scale(0.95); }
  .slide-title { display: none; }
  .logo-container { top: calc(32% + 12vh - 25%); margin: 0 auto; left: 0; right: 0; width: 85%; height: 23%; }
  .logo { max-height: 90%; filter: brightness(1.5); }
  #slideshow-pause-button { right: calc(50% - var(--button-icon-only-size)/2); top: calc(50% + 20vh + 2em); }
}
